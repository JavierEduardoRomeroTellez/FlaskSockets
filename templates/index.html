<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>RelRed Totem</title>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css" integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
		<style type="text/css">
			/* The switch - the box around the slider */

			body {
				background-color: #f7f7f7;
			}

			img {
				display: block;
				margin-left: auto;
				margin-right: auto;
				width: 30vw;
			}

			.container {
				margin: auto;
				width: 50%;
				padding: 10px;
				text-align: center;
			}

			.switch {
				position: relative;
				display: inline-block;
				width: 25vw;
				height: 5vh;
			}

			/* Hide default HTML checkbox */
			.switch input {
				opacity: 0;
				width: 0;
				height: 0;
			}

			.boton{
				margin: 7.5vh;
			}

			/* The slider */
			.slider {
				position: absolute;
				cursor: pointer;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				background-color: #ccc;
				-webkit-transition: .4s;
				transition: .4s;
			}

			.slider:before {
				position: absolute;
				content: "";
				height: 5vh;
				width: 5vh;
				left: 1vh;
				background-color: white;
				-webkit-transition: .4s;
				transition: .4s;
			}

			input:checked + .slider {
				background-color: #2196F3;
			}

			input:focus + .slider {
				box-shadow: 0 0 1px #2196F3;
			}

			input:checked + .slider:before {
				-webkit-transform: translateX(calc(25vw - 7.5vh));
				-ms-transform: translateX(calc(25vw - 7.5vh));
				transform: translateX(calc(25vw - 7.5vh));
			}

			/* Rounded sliders */
			.slider.round {
				border-radius: 15vh;
			}

			.slider.round:before {
				border-radius: 50%;
			}

			i {
				font-size: 5rem;
				color: red;
			}

			.btn {
				position: fixed;
     			bottom: 0;
     			right: 0;
				background-color: f7f7f7;
				border: none;
				margin: 3%
			}

			.btn:hover i {
				color: rgb(101, 0, 0);
			}
		</style>
	</head>
	<body>
		<img src='https://i.postimg.cc/zBf1YD0w/Rel-Red-Logo.png' id="imagen" alt="Logo" width="500vw"/>
		<div class='container'>
			<div class='boton'>
				<label class="switch">
					<input type="checkbox" id="Checkbox1">
					<span class="slider round"></span>
				</label>
			</div>
			<div class='boton'>
				<label class="switch">
					<input type="checkbox" id="Checkbox2">
					<span class="slider round"></span>
				</label>
			</div>
			<div class='boton'>
				<label class="switch">
					<input type="checkbox" id="Checkbox3">
					<span class="slider round"></span>
				</label>
			</div>
			<input type="text" id="Message">
			<button type="button" id="send">Send</button>
		</div>
		<button class="btn" id="turnoff"><i class="fa-solid fa-power-off"></i></button>
		<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.1/socket.io.js" charset="utf-8"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.10.4/gsap.min.js" integrity="sha512-VEBjfxWUOyzl0bAwh4gdLEaQyDYPvLrZql3pw1ifgb6fhEvZl9iDDehwHZ+dsMzA0Jfww8Xt7COSZuJ/slxc4Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
		<script>

			let tl = gsap.timeline({repeat: 0});

			tl.from('#imagen',{
				duration: 1,
			});


			tl.from('#imagen',{
				duration: 1.5,
				y: '40vh',
				ease: "sine"
			});

			tl.from('.container, .btn', {
				duration: 1,
				opacity: 0
			})



			const socket = io();

			//socket.emit('message', 'hello');

			socket.on('message',function (msg) {
				if(msg == 'True1'){
					$("#Checkbox1").prop("checked", true);
					console.log("Encendio el led");
				}else if (msg == 'False1'){
					$("#Checkbox1").prop("checked", false);	
					console.log("Apago el led");
				}else if (msg == 'True2'){
					$("#Checkbox2").prop("checked", true);	
					console.log("Encendio el led");
				}else if (msg == 'False2'){
					$("#Checkbox2").prop("checked", false);	
					console.log("Apago el led");
				}else if (msg == 'True3'){
					$("#Checkbox3").prop("checked", true);	
					console.log("Encendio el led");
				}else if (msg == 'False3'){
					$("#Checkbox3").prop("checked", false);	
					console.log("Apago el led");
				}else if (msg == 'Button1On'){
					socket.emit('turnOnLed1')
				}else if (msg == 'Button1Off'){
					socket.emit('turnOffLed1')
				}else if (msg == 'OK'){
					alert('Sabes la clave eh')
				}

			});
			//jQuery listen for checkbox change
			$("#Checkbox1").change(function() {
					if(this.checked) {
							console.log('cambio el checkbox')
							socket.emit('turnOnLed1')
					}else{
							console.log('cambio el checkbox')
							socket.emit('turnOffLed1')
					}
			});

			$("#Checkbox2").change(function() {
					if(this.checked) {
							console.log('cambio el checkbox')
							socket.emit('turnOnLed2')
					}else{
							console.log('cambio el checkbox')
							socket.emit('turnOffLed2')
					}
			});

			$("#Checkbox3").change(function() {
					if(this.checked) {
							console.log('cambio el checkbox')
							socket.emit('turnOnLed3')
					}else{
							console.log('cambio el checkbox')
							socket.emit('turnOffLed3')
					}
			});

			$('#send').on('click', function (){
				socket.send($('#Message').val());
				$('#Message').val('');
			});

			$('#turnoff').on('click', function (){
				socket.emit('shutdown');
			});
		</script>
	</body>
</html>
